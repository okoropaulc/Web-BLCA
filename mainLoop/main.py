#!/usr/bin/python3import subprocessimport osimport loggingimport datetimelogging.basicConfig(level=logging.DEBUG, filename="web-blca.log")#object to make keeping track of users easier class User:    def __init__(self, name, email, data):        self.name = name        self.email = email        self.data = data #runs bash command but does not print outdef normal(cmd):    subprocess.run([cmd], stdout=subprocess.PIPE, stderr=subprocess.PIPE, check=True, shell=True)    logging.info(cmd)#runs call and prints out to shell sessiondef normal_verbose(cmd):    call = subprocess.run([cmd], check=True, shell=True)    logging.info(cmd)#function checks to see if program is installed and in path somewhat of a formalitydef check_program(tool):    try:        if tool == "muscle":            subprocess.call([tool, '-version'],stdout=subprocess.PIPE)        else:            subprocess.call([tool, "--help"],stdout=subprocess.PIPE)    except OSError as e:        if e.errno == os.errno.ENOENT:            print(tool + " not found, installing")            if tool == "pip":                normal("sudo apt install -y python3-pip")                logging.info("pip not found")                logging.info("sudo apt install -y python3-pip")            elif tool == "blastn":                logging.info("blast not found")                normal("sudo apt install -y ncbi-blast+")                logging.info("sudo apt install -y ncbi-blast+")            else:                logging.info(tool + " not found")                normal("sudo apt install -y " + tool)                logging.info("sudo apt install -y " + tool)    logging.info(tool +" installed and working fine")#function to make sure all dependencies are installed and in path TODO setup BLCA universlly ie. first scriptdef setup():    cwd = os.getcwd()    list = []    with open("depend.txt", 'r') as dependencies:        all_line = dependencies.read()    for line in all_line.split():        list.append(line.strip())    print(list)    for program in list:        check_program(program)    #biopython needs to be installed through pip so this just checks it    logging.info("pip3 install biopython")    normal("pip3 install biopython")    logging.info("All dependencies installed")#Handles creating the user directory and writing the user data to file and running BLCAdef blca(user_id, data):    cwd = os.getcwd()    if not (os.path.exists(user_id)):        logging.info("mkdir "+user_id)        normal("mkdir "+user_id)        os.chdir("..")        print(os.getcwd())        logging.info("cp -rf BLCA "+cwd+"/"+user_id)        normal("cp -rf BLCA "+cwd+"/"+user_id)        os.chdir(cwd +"/"+user_id+"/BLCA")    else:        os.chdir(user_id)        time = datetime.datetime.now().time()        normal("mkdir " +time)        cwd = os.getcwd()        os.chdir("..")        os.chdir("..")        normal("cp -rf BLCA "+cwd+"/")        os.chdir(cwd+"/"+time+ "/" + "BLCA")    file = open("data.fasta", "w")    file.write(data)    file.close()    logging.info("python3 2.blca_main.py -i data.fasta")    normal("python3 2.blca_main.py -i data.fasta")    print("ok")def read_in_fasta(filename):    fasta_stuff = ""    with open(filename, "r") as myfile:        fasta_stuff = myfile.read()    return fasta_stuff#Runs setup methodsetup()queue = []fasta = "test.fasta"ben = User("Ben", "blornetz@luc.edu", read_in_fasta(fasta))queue.append(ben)while queue != []:    for item in queue:        print(item.name)    blca(queue[0].email, queue[0].data)    del(queue[0])name = input("Please enter a name> ")email = input("Please enter an email> ")data = input("Please enter the filename for your fasta data> ")count = datetime.datetime.now().time()count = User(name, email, data)queue.append(count)#TODO check if dir was created and just move into it if need be #TODO make a queue, (for loop) that calls in order#TODO send email when job is doneprint("all good boss")